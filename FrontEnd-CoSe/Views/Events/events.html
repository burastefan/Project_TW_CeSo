<!DOCTYPE html>
<html lang="en-US">

<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Events</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="../../main.css" />
  <link rel="stylesheet" href="../Events/events.css" />
  <link rel="stylesheet" href="../../navbar.css" />
  <link rel="icon" type="image/x-icon" href="../../images/logo.png">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500&display=swap" rel="stylesheet">
  <script src="https://kit.fontawesome.com/1fede1a164.js" crossorigin="anonymous"></script>
  <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
  <script src="../../Scripts/navbar.js"></script>
  <script src="../../components/navbarComponent.js" type="text/javascript" defer></script>
  <script src="../../components/sideNavbarComponent.js" type="text/javascript" defer></script>
  <script src="../../components/miniNavbarComponent.js" type="text/javascript" defer></script>
</head>

<body>
  <navbar-component class="displayNavbar"></navbar-component>
  <div class="page-row">
    <div class="container" style="margin-top: 5px;">
      <mininavbar-component style="width: 100%"></mininavbar-component>
      <div class="first-container" style="padding-top:20px;">
        <div class="text-align-center margin-bottom-40">
          <span style="color:#FFFFFF;" class="text-title">Be in the know of news and intricate details, always</span>
        </div>

      </div>
      <div class="second-container">
        <div class="content">
          <div class="flex-column margin-bottom-20">
            <span class="margin-bottom-8 title-page">Add new event</span>
            <span class="subtitle-page">Describe the event just happened!</span>
          </div>
          <form id="addEventForm" class="flex-column">
            <div class="flex-column margin-bottom-24">
              <label class="label-text margin-bottom-8">Event title</label>
              <input class="input-place" type="text" name="eventTitle" placeholder="Event title" required />
            </div>

            <div class="flex-column margin-bottom-24">
              <label class="label-text margin-bottom-8">Event description</label>
              <textarea placeholder="Description" name="eventDescription" rows="10" required></textarea>
            </div>

            <div class="flex-row">
              <div class="flex-column margin-bottom-24 margin-right-16">
                <label class="label-text margin-bottom-8">Time of occurrence:</label>
                <input class="input-place" type="month" id="eventTime" name="eventTime" required>
              </div>
              <div class="flex-column margin-bottom-0">
                <label class="label-text margin-bottom-8" class="">Location</label>
                <input class="input-place" type="text" name="eventLocation" placeholder="Location" required />
              </div>
            </div>

            <div class="flex-row">
              <div class="flex-column margin-right-16 margin-bottom-0">
                <label class="label-text margin-bottom-8 margin-right-16">Category:</label>
                <select class="input-place" name="eventCategory" required>
                  <option value="fire">Fire</option>
                  <option value="flood">Flood</option>
                  <option value="earthquake">Earthquake</option>
                  <option value="storm">Storm</option>
                </select>
              </div>

              <div class="flex-column margin-right-16 margin-bottom-0">
                <label class="label-text margin-bottom-8 ">Code:</label>
                <select class="input-place" name="eventCode" required>
                  <option value="yellow">Yellow</option>
                  <option value="red">Red</option>
                  <option value="orange">Orange</option>
                </select>
              </div>

              <div class="flex-column">
                <label class="label-text margin-bottom-8">Status</label>
                <input class="input-place" type="text" name="eventStatus" value="New">
              </div>
            </div>

            <div class="flex-justify-center margin-top-60">
              <button id="submitButton" class="authentication-button input-title text-align-center hand-mouse" style="background: #12b83e;">
                Save
              </button>
            </div>
          </form>
        </div>
      </div>
    </div>
    <sidenavbar-component></sidenavbar-component>
  </div>

  <script>
    function functie() {
      console.log('asdadsasda')
      console.log(document.getElementById('addEventForm'))
    }

    document.addEventListener('submit', (e) => {
    // Store reference to form to make later code easier to read
    const form = e.target;

    // Prevent the default form submit
    e.preventDefault();

    const formData = new FormData(form);

    console.log(formData.entries())

    const title = formData.get('eventTitle')
    const description = formData.get('eventDescription')
    const date = new Date(formData.get('eventTime'))
    const location = formData.get('eventLocation')
    const category = formData.get('eventCategory')
    const code = formData.get('eventCode')
    const status = formData.get('eventStatus')

    const event = {
      'name': title,
      'status': status,
      'location': location,
      'category': category,
      'code': code,
      'date': date,
      'description': description
    }

    console.log('Event: ', event)

    axios.post('http://localhost:5000/api/events', JSON.stringify(event))
    .then((response) => {
      console.log(response);
    });
});
  </script>
</body>

</html>